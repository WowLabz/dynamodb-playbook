flowchart LR
  %% B6 Streams Pipeline: notifications, counters, search
  classDef ddb fill:#ecfdf5,stroke:#10b981,rx:6,ry:6;
  classDef lam fill:#f0f9ff,stroke:#0ea5e9,rx:6,ry:6;
  classDef sink fill:#fff7ed,stroke:#fb923c,rx:6,ry:6;
  classDef guard fill:#fef2f2,stroke:#ef4444,rx:6,ry:6;

  P["Posts/Engagement mutations"]:::ddb --> S["DynamoDB Streams"]:::ddb --> L["Lambda Multiplexer"]:::lam
  L --> N1["Notifications"]
  L --> N2["Counters (likes/comments)"]
  L --> N3["Search/Index Sync"]
  L -. on failure .-> DLQ["DLQ"]:::guard
